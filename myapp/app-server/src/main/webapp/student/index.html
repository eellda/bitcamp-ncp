<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <title>비트캠프 - NCP 1기</title>
</head>

<style>
aside {
  border: 1px solid red;
  box-sizing: boarder-box;
  float: left;
  width: 200px;
}

article {
  border: 1px solid black;
  box-sizing: boarder-box;
  margin-left: 210px;
}
</style>

<body>
<h1>학생(Thymeleaf)</h1>

<aside>
<form action='list' method='get'>
  <input type='text' name='keyword' value="">
  <button>검색</button>
</form>

<div><a href='form'>새 학생</a></div>

<table id="student-table" border='1'>
  <thead>
  <tr>
    <th>번호</th> <th>이름</th> <th>재직</th>
  </tr>
  </thead>
  <tbody>

  </tbody>
</table>
</aside>

<article>
  <form id='student-form' action='update' method='post'>
    <table border='1'>
      <tr>
        <th>번호</th>
        <td><input type='text' name='no'
                   value='88'
                   readonly></td>
      </tr>
      <tr>
        <th>이름</th>
        <td><input type='text' name='name'
                   value='aa44x'></td>
      </tr>
      <tr>
        <th>이메일</th>
        <td><input type='email' name='email'
                   value='aa44x@test.com'></td>
      </tr>
      <tr>
        <th>암호</th>
        <td><input type='password' name='password'></td>
      </tr>
      <tr>
        <th>전화</th>
        <td><input type='tel' name='tel'
                   value='1x'></td>
      </tr>
      <tr>
        <th>우편번호</th>
        <td><input type='text' name='postNo'
                   value='2x'></td>
      </tr>
      <tr>
        <th>기본주소</th>
        <td><input type='text' name='basicAddress'
                   value='3x'></td>
      </tr>
      <tr>
        <th>상세주소</th>
        <td><input type='tel' name='detailAddress'
                   value='4x'></td>
      </tr>
      <tr>
        <th>재직여부</th>
        <td><input type='checkbox' name='working' checked="checked"> 재직중</td>
      </tr>
      <tr>
        <th>성별</th>
        <td><input type='radio' name='gender' value='M'>
          <input type='radio' name='gender'
                 value='W' checked="checked"> 여</td>
      </tr>
      <tr>
        <th>전공</th>
        <td><select name='level'>
          <option value='0' selected="selected">비전공자</option>
          <option value='1'>준전공자</option>
          <option value='2'>전공자</option>
        </select></td>
      </tr>
      <tr>
        <th>등록일</th>
        <td>2023-03-02</td>
      </tr>
    </table>

    <div>
      <button id='btn-list' type='button'>목록</button>
      <button>변경</button>
      <button id='btn-delete' type='button'>삭제</button>
    </div>
  </form>
</article>

<script>
fetch("../admin/students")
.then(response => {
  return response.json();
})
.then(result => {
  let tbody = "";
  result.data.forEach(student => {
    let html = `
  	  <tr>
  	     <td>${student.no}</td>
  	     <td><a href='view.html?no=${student.no}'>${student.name}</a></td>
  	     <td>${student.working ? '예' : '아니요'}</td>
  	  </tr>
  	`;
  	tbody += html;
  });
  document.querySelector("#student-table > tbody").innerHTML = tbody;
});

function getLevelTitle(level) {
  switch (level) {
    case 0: return "비전공자";
    case 1: return "준전공자";
    case 2: return "전공자";
    default: return "기타";
  }
}
</script>

</body>
</html>


